(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-802fe082"],{"159b":function(t,e,c){var n=c("da84"),r=c("fdbc"),a=c("785a"),l=c("17c2"),o=c("9112"),s=function(t){if(t&&t.forEach!==l)try{o(t,"forEach",l)}catch(e){t.forEach=l}};for(var b in r)r[b]&&s(n[b]&&n[b].prototype);s(a)},"17c2":function(t,e,c){"use strict";var n=c("b727").forEach,r=c("a640"),a=r("forEach");t.exports=a?[].forEach:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}},"4de4":function(t,e,c){"use strict";var n=c("23e7"),r=c("b727").filter,a=c("1dde"),l=a("filter");n({target:"Array",proto:!0,forced:!l},{filter:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},5530:function(t,e,c){"use strict";c.d(e,"a",(function(){return a}));c("b64b"),c("a4d3"),c("4de4"),c("d3b7"),c("e439"),c("159b"),c("dbb4");function n(t,e,c){return e in t?Object.defineProperty(t,e,{value:c,enumerable:!0,configurable:!0,writable:!0}):t[e]=c,t}function r(t,e){var c=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),c.push.apply(c,n)}return c}function a(t){for(var e=1;e<arguments.length;e++){var c=null!=arguments[e]?arguments[e]:{};e%2?r(Object(c),!0).forEach((function(e){n(t,e,c[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(c)):r(Object(c)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(c,e))}))}return t}},5764:function(t,e,c){"use strict";c.r(e);var n=c("7a23"),r={class:"table-responsive"},a={class:"table mt-4"},l=Object(n["h"])("thead",null,[Object(n["h"])("tr",null,[Object(n["h"])("th",null,"購買時間"),Object(n["h"])("th",null,"Email"),Object(n["h"])("th",null,"購買款項"),Object(n["h"])("th",null,"應付金額"),Object(n["h"])("th",null,"是否付款"),Object(n["h"])("th",null,"編輯")])],-1),o={class:"list-unstyled"},s={class:"list-unstyled"},b=Object(n["h"])("br",null,null,-1),d={class:"text-right text-wrap"},i={key:0,class:"text-success"},O={key:1,class:"text-text-muted"},u={class:"btn-group"},h=["onClick"],j=["onClick"];function p(t,e,c,p,f,m){var g=Object(n["H"])("OrderModal"),v=Object(n["H"])("Page"),y=Object(n["H"])("Loading"),k=Object(n["H"])("DelModal"),w=Object(n["H"])("Toast");return Object(n["z"])(),Object(n["g"])(n["a"],null,[Object(n["h"])("div",r,[Object(n["h"])("table",a,[l,Object(n["h"])("tbody",null,[(Object(n["z"])(!0),Object(n["g"])(n["a"],null,Object(n["F"])(f.orders,(function(e,c){return Object(n["z"])(),Object(n["g"])("tr",{key:c},[Object(n["h"])("td",null,[Object(n["h"])("ul",o,[Object(n["h"])("li",null,Object(n["K"])(t.$filters.date(e.create_at)),1)])]),Object(n["h"])("td",null,Object(n["K"])(e.user.email),1),Object(n["h"])("td",null,[Object(n["h"])("ul",s,[(Object(n["z"])(!0),Object(n["g"])(n["a"],null,Object(n["F"])(e.products,(function(t,e){return Object(n["z"])(),Object(n["g"])("li",{key:e},[Object(n["j"])(Object(n["K"])(t.product.title)+" ",1),b,Object(n["j"])(" 數量 : "+Object(n["K"])(t.qty),1)])})),128))])]),Object(n["h"])("td",d,"$"+Object(n["K"])(e.total),1),Object(n["h"])("td",null,[e.is_paid?(Object(n["z"])(),Object(n["g"])("span",i,"已付款")):(Object(n["z"])(),Object(n["g"])("span",O,"未付款"))]),Object(n["h"])("td",null,[Object(n["h"])("div",u,[Object(n["h"])("button",{class:"btn btn-outline-primary btn-sm",onClick:function(t){return m.openOrderModal(e)}}," 查看訂單狀態 ",8,h),Object(n["h"])("button",{class:"btn btn-outline-danger btn-sm",onClick:function(t){return m.openDelModal(e)}}," 刪除 ",8,j)])])])})),128))])])]),Object(n["k"])(g,{ref:"orderModal",Order:f.tempOrders,onUpdataOrder:m.updataOrder},null,8,["Order","onUpdataOrder"]),Object(n["k"])(v,{pages:f.pagination,onEmitPages:m.getOrders},null,8,["pages","onEmitPages"]),Object(n["k"])(y,{active:t.isLoading},null,8,["active"]),Object(n["k"])(k,{ref:"delModal",item:f.tempOrders,onDelItem:m.delOrder},null,8,["item","onDelItem"]),Object(n["k"])(w,{toastMsg:f.toastMsg},null,8,["toastMsg"])],64)}var f=c("5530"),m=(c("99af"),c("78c9")),g=(c("b0c0"),{class:"modal fade",id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"}),v={class:"modal-dialog modal-xl",role:"document"},y={class:"modal-content border-0"},k=Object(n["h"])("div",{class:"modal-header bg-dark text-white"},[Object(n["h"])("h5",{class:"modal-title",id:"exampleModalLabel"},[Object(n["h"])("span",null,"訂單細節")]),Object(n["h"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),w={class:"modal-body"},x={class:"row"},M={class:"col-md-4"},z=Object(n["h"])("h3",null,"用戶資料",-1),P={key:0,class:"table"},K=Object(n["h"])("th",{style:{width:"100px"}},"姓名",-1),$=Object(n["h"])("th",null,"Email",-1),E=Object(n["h"])("th",null,"電話",-1),D=Object(n["h"])("th",null,"地址",-1),_={class:"col-md-8"},C=Object(n["h"])("h3",null,"訂單細節",-1),L={class:"table"},F=Object(n["h"])("th",{style:{width:"100px"}},"訂單編號",-1),H=Object(n["h"])("th",null,"下單時間",-1),S=Object(n["h"])("th",null,"付款時間",-1),I={key:0},T={key:1},q=Object(n["h"])("th",null,"付款狀態",-1),J={key:0,class:"text-success"},U={key:1,class:"text-muted"},A=Object(n["h"])("th",null,"總金額",-1),V=Object(n["h"])("h3",null,"選購商品",-1),X={class:"table"},B=Object(n["h"])("thead",null,[Object(n["h"])("tr")],-1),G={class:"text-end"},N={class:"modal-footer"},Q=Object(n["h"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function R(t,e,c,r,a,l){return Object(n["z"])(),Object(n["g"])("div",g,[Object(n["h"])("div",v,[Object(n["h"])("div",y,[k,Object(n["h"])("div",w,[Object(n["h"])("div",x,[Object(n["h"])("div",M,[z,a.tempOrders.user?(Object(n["z"])(),Object(n["g"])("table",P,[Object(n["h"])("tbody",null,[Object(n["h"])("tr",null,[K,Object(n["h"])("td",null,Object(n["K"])(a.tempOrders.user.name),1)]),Object(n["h"])("tr",null,[$,Object(n["h"])("td",null,Object(n["K"])(a.tempOrders.user.email),1)]),Object(n["h"])("tr",null,[E,Object(n["h"])("td",null,Object(n["K"])(a.tempOrders.user.tel),1)]),Object(n["h"])("tr",null,[D,Object(n["h"])("td",null,Object(n["K"])(a.tempOrders.user.address),1)])])])):Object(n["f"])("",!0)]),Object(n["h"])("div",_,[C,Object(n["h"])("table",L,[Object(n["h"])("tbody",null,[Object(n["h"])("tr",null,[F,Object(n["h"])("td",null,Object(n["K"])(a.tempOrders.id),1)]),Object(n["h"])("tr",null,[H,Object(n["h"])("td",null,Object(n["K"])(t.$filters.date(a.tempOrders.create_at)),1)]),Object(n["h"])("tr",null,[S,Object(n["h"])("td",null,[a.tempOrders.paid_date?(Object(n["z"])(),Object(n["g"])("span",I,Object(n["K"])(t.$filters.date(a.tempOrders.paid_date)),1)):(Object(n["z"])(),Object(n["g"])("span",T,"時間不正確"))])]),Object(n["h"])("tr",null,[q,Object(n["h"])("td",null,[a.tempOrders.is_paid?(Object(n["z"])(),Object(n["g"])("strong",J,"已付款")):(Object(n["z"])(),Object(n["g"])("span",U,"尚未付款"))])]),Object(n["h"])("tr",null,[A,Object(n["h"])("td",null,Object(n["K"])(a.tempOrders.total),1)])])]),V,Object(n["h"])("table",X,[B,(Object(n["z"])(!0),Object(n["g"])(n["a"],null,Object(n["F"])(a.tempOrders.products,(function(e){return Object(n["z"])(),Object(n["g"])("tbody",{key:e.id},[Object(n["h"])("tr",null,[Object(n["h"])("th",null,Object(n["K"])(e.product.title),1),Object(n["h"])("td",null,"數量 :　"+Object(n["K"])(e.qty),1),Object(n["h"])("td",G,Object(n["K"])(t.$filters.currency(e.final_total)),1)])])})),128))])])])]),Object(n["h"])("div",N,[Q,Object(n["h"])("button",{type:"button",class:"btn btn-primary",onClick:e[0]||(e[0]=function(e){return t.$emit("updataOrder",a.tempOrders)})}," 確認付款 ")])])])],512)}var W=c("e0ae"),Y={data:function(){return{tempOrders:{}}},props:{Order:{}},watch:{Order:function(){this.tempOrders=this.Order}},mixins:[W["a"]]},Z=c("6b0d"),tt=c.n(Z);const et=tt()(Y,[["render",R]]);var ct=et,nt=c("9973"),rt=c("0eb4"),at={data:function(){return{pagination:"",orders:{},toastMsg:{},tempOrders:{}}},components:{OrderModal:ct,Page:nt["a"],DelModal:m["a"],Toast:rt["a"]},methods:{getOrders:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("barry-chen","/admin/orders/?page=").concat(e);this.isLoading=!0,this.$http.get(c).then((function(e){t.orders=e.data.orders,t.pagination=e.data.pagination,t.isLoading=!1}))},openOrderModal:function(t){var e=this.$refs.orderModal;e.show(),this.tempOrders=Object(f["a"])({},t)},updataOrder:function(t){var e=this,c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("barry-chen","/admin/order/").concat(t.id);console.log(c);var n={is_paid:t.is_paid};this.$http.put(c,{data:n}).then((function(c){e.toastMsg=c.data,e.getOrders(t.current_page),e.$refs.orderModal.hide()}))},openDelModal:function(t){this.$refs.delModal.show(),this.tempOrders=Object(f["a"])({},t)},delOrder:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("barry-chen","/admin/order/").concat(this.tempOrders.id);console.log(e),this.$http.delete(e).then((function(e){t.toastMsg=e.data,t.getOrders(t.pagination.current_page),t.$refs.delModal.hide()}))}},created:function(){this.getOrders()}};const lt=tt()(at,[["render",p]]);e["default"]=lt},"78c9":function(t,e,c){"use strict";var n=c("7a23"),r={class:"modal",tabindex:"-1",ref:"modal"},a={class:"modal-dialog"},l={class:"modal-content"},o=Object(n["h"])("div",{class:"modal-header"},[Object(n["h"])("h5",{class:"modal-title"},"Modal title"),Object(n["h"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),s=Object(n["h"])("div",{class:"modal-body"},[Object(n["h"])("p",null,"是否確定要刪除？")],-1),b={class:"modal-footer"},d=Object(n["h"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function i(t,e,c,i,O,u){return Object(n["z"])(),Object(n["g"])("div",r,[Object(n["h"])("div",a,[Object(n["h"])("div",l,[o,s,Object(n["h"])("div",b,[d,Object(n["h"])("button",{type:"button",class:"btn btn-primary",onClick:e[0]||(e[0]=function(e){return t.$emit("del-item")})}," 刪除 ")])])])],512)}var O=c("e0ae"),u={data:function(){return{modal:""}},props:{item:{}},mixins:[O["a"]]},h=c("6b0d"),j=c.n(h);const p=j()(u,[["render",i]]);e["a"]=p},9973:function(t,e,c){"use strict";var n=c("7a23"),r={"aria-label":"Page navigation example"},a={class:"pagination justify-content-center"},l=["onClick"];function o(t,e,c,o,s,b){return Object(n["z"])(),Object(n["g"])("nav",r,[Object(n["h"])("ul",a,[(Object(n["z"])(!0),Object(n["g"])(n["a"],null,Object(n["F"])(c.pages.total_pages,(function(t){return Object(n["z"])(),Object(n["g"])("li",{class:"page-item",key:t},[Object(n["h"])("a",{class:"page-link",href:"#",onClick:Object(n["V"])((function(e){return b.updatePage(t)}),["prevent"])},Object(n["K"])(t),9,l)])})),128))])])}var s={props:["pages"],methods:{updatePage:function(t){this.$emit("emit-pages",t)}}},b=c("6b0d"),d=c.n(b);const i=d()(s,[["render",o]]);e["a"]=i},a640:function(t,e,c){"use strict";var n=c("d039");t.exports=function(t,e){var c=[][t];return!!c&&n((function(){c.call(null,e||function(){throw 1},1)}))}},b0c0:function(t,e,c){var n=c("83ab"),r=c("5e77").EXISTS,a=c("e330"),l=c("9bf2").f,o=Function.prototype,s=a(o.toString),b=/^\s*function ([^ (]*)/,d=a(b.exec),i="name";n&&!r&&l(o,i,{configurable:!0,get:function(){try{return d(b,s(this))[1]}catch(t){return""}}})},b64b:function(t,e,c){var n=c("23e7"),r=c("7b0b"),a=c("df75"),l=c("d039"),o=l((function(){a(1)}));n({target:"Object",stat:!0,forced:o},{keys:function(t){return a(r(t))}})},dbb4:function(t,e,c){var n=c("23e7"),r=c("83ab"),a=c("56ef"),l=c("fc6a"),o=c("06cf"),s=c("8418");n({target:"Object",stat:!0,sham:!r},{getOwnPropertyDescriptors:function(t){var e,c,n=l(t),r=o.f,b=a(n),d={},i=0;while(b.length>i)c=r(n,e=b[i++]),void 0!==c&&s(d,e,c);return d}})},e439:function(t,e,c){var n=c("23e7"),r=c("d039"),a=c("fc6a"),l=c("06cf").f,o=c("83ab"),s=r((function(){l(1)})),b=!o||s;n({target:"Object",stat:!0,forced:b,sham:!o},{getOwnPropertyDescriptor:function(t,e){return l(a(t),e)}})}}]);
//# sourceMappingURL=chunk-802fe082.27758178.js.map